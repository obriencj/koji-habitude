# Basic meta-template generation test
# Meta-template that generates another template
---
type: template
name: gen-product
content: |
  ---
  type: template
  name: create-{{ product }}-version
  content: |
    ---
    type: tag
    name: {{ "{{" }} product {{ "}}" }}-{{ "{{" }} version {{ "}}" }}-build
    arches:
      - x86_64
      - aarch64
    ---
    type: tag
    name: {{ "{{" }} product {{ "}}" }}-{{ "{{" }} version {{ "}}" }}-dest
    arches:
      - x86_64
      - aarch64
    ---
    type: target
    name: {{ "{{" }} product {{ "}}" }}-{{ "{{" }} version {{ "}}" }}-target
    build-tag: {{ "{{" }} product {{ "}}" }}-{{ "{{" }} version {{ "}}" }}-build
    dest-tag: {{ "{{" }} product {{ "}}" }}-{{ "{{" }} version {{ "}}" }}-dest
    ---
    type: group
    name: {{ "{{" }} product {{ "}}" }}-{{ "{{" }} version {{ "}}" }}-users
---
# Call meta-template to generate the version template
type: gen-product
product: myapp
---
# Call the generated template
type: create-myapp-version
product: myapp
version: "1.0"
